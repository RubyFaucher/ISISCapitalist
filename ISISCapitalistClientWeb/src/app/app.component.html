<div class="header">
  <mat-toolbar color="primary">
    <div><img class="logo_monde" [attr.src]="server + world.logo" /></div>
    <span class="example-spacer"></span>

    <div>
      <span id="worldmoney" [innerHTML]="world.money | bigvalue"
        >{{ world.money }} </span
      >£
    </div>
    <span class="example-spacer"></span>
    <div>
      <input
        type="text"
        [(ngModel)]="username"
        (change)="onUsernameChanged()"
        size="9"
      />
    </div>
  </mat-toolbar>
</div>

<div class="main">
  <div>
    <button
      (click)="changeShowManagers()"
      [matBadge]="badgeManagers"
      [matBadgeHidden]="badgeManagers == 0"
      class="managersButton"
      mat-raised-button
      color="accent"
    >
      Managers</button
    ><br /><br />
    <button
      (click)="changeShowUnlocks()"
      [matBadge]="badgeUnlocks"
      [matBadgeHidden]="badgeUnlocks == 0"
      class="managersButton"
      mat-raised-button
      color="accent"
    >
      Unlocks
    </button>
  </div>

  <div class="product">
    <div>
      <app-product
        *ngIf="world.products.product.length > 0"
        (notifyAchat)="onBuy($event)"
        (notifyProduction)="onProductionDone($event)"
        [qtmulti]="qtmulti"
        [money]="world.money"
        [prod]="world.products.product[0]"
        class="product col-md-6"
      ></app-product>
    </div>
    <div>
      <app-product
        *ngIf="world.products.product.length > 0"
        (notifyAchat)="onBuy($event)"
        (notifyProduction)="onProductionDone($event)"
        [qtmulti]="qtmulti"
        [money]="world.money"
        [prod]="world.products.product[1]"
        class="product col-md-6"
      ></app-product>
    </div>
  </div>

  <div class="button-commutateur">
    <button mat-raised-button (click)="changeCommutateur()" color="primary">
      {{ qtmulti }}
    </button>
  </div>
</div>

<div *ngIf="showManagers" class="modal">
  <div>
    <h1 class="title">Managers make you feel better !</h1>
  </div>
  <div>
    <div *ngFor="let manager of world.managers.pallier">
      <div *ngIf="!manager.unlocked" class="pallierlayout">
        <div class="cadre">
          <div class="logo">
            <img class="round" [attr.src]="server + manager.logo" />
          </div>
          <div class="pallier">
            <div class="nomPrix">
              <span>{{ manager.name }}</span>
              <span>{{ manager.seuil }}£</span>
            </div>
            <span class="palliercible">
              {{ world.products.product[manager.idcible - 1].name }}
            </span>
            <button
              mat-raised-button
              class="hirebutton"
              color="accent"
              (click)="hireManager(manager)"
              [disabled]="!(world.money >= manager.seuil)"
            >
              Hire !
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="button-center">
      <button
        mat-raised-button
        class="closebutton"
        color="primary"
        (click)="showManagers = !showManagers"
      >
        Close
      </button>
    </div>
  </div>
</div>

<div *ngIf="showUnlocks" class="modal">
  <div>
    <h1 class="title">Unlocks make your life easier !</h1>
  </div>
  <div>
    <div *ngFor="let unlock of world.allunlocks.pallier">
      <div *ngIf="!unlock.unlocked" class="pallierlayout">
        <div class="cadre">
          <div class="logo">
            <img class="round" [attr.src]="server + unlock.logo" />
          </div>
          <div class="pallier">
            <div class="nomPrix">
              <span>{{ unlock.name }}</span>
              <span>{{ unlock.seuil }}£</span>
            </div>
            <span class="palliercible">
              {{ world.products.product[unlock.idcible - 1].name }}
            </span>
            <button
              mat-raised-button
              class="hirebutton"
              color="accent"
              (click)="getUnlock(unlock)"
              [disabled]="!(world.money >= unlock.seuil)"
            >
              Get !
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="button-center">
      <button
        mat-raised-button
        class="closebutton"
        color="primary"
        (click)="showUnlocks = !showUnlocks"
      >
        Close
      </button>
    </div>
  </div>
</div>
